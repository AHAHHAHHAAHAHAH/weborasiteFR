---
import type { SiteConfig } from "../lib/siteConfig";
const { cfg } = Astro.props as { cfg: SiteConfig };
const wa = `https://wa.me/${cfg.contacts.phoneE164}`;

const cta = cfg.navigation.cta;
const ctaHref = cta.type === "whatsapp" ? wa : "#contatti";
---

<header style="position:sticky; top:0; z-index:50; backdrop-filter: blur(10px); border-bottom:1px solid var(--line); background: rgba(11,11,13,.65);">
  <div class="wrap" style="display:flex; align-items:center; justify-content:space-between; padding:14px 18px;">
    <a href="#top" style="display:flex; align-items:center; gap:12px;">
      <img src={cfg.brand.logoPath} alt={cfg.brand.name} style="height:30px; width:auto; display:block;" />
      <div style="display:flex; flex-direction:column; line-height:1;">
        <strong style="font-size:.98rem; letter-spacing:.02em;">{cfg.brand.name}</strong>
        <span style="font-size:.78rem; color:var(--muted);">{cfg.brand.tagline}</span>
      </div>
    </a>

    <div style="display:flex; align-items:center; gap:10px;">
      <a class="btn" href={ctaHref} target={cta.type === "whatsapp" ? "_blank" : undefined} rel="noreferrer">{cta.label}</a>
      <button class="btn" id="openDrawer" aria-label="Apri menu">
        <span style="display:inline-block; width:18px; height:12px; position:relative;">
          <span style="position:absolute; left:0; right:0; top:0; height:2px; background:var(--text); border-radius:99px;"></span>
          <span style="position:absolute; left:0; right:0; top:5px; height:2px; background:var(--text); border-radius:99px; opacity:.78;"></span>
          <span style="position:absolute; left:0; right:0; bottom:0; height:2px; background:var(--text); border-radius:99px; opacity:.55;"></span>
        </span>
      </button>
    </div>
  </div>

  <script>
    document.getElementById("openDrawer")?.addEventListener("click", () => {
      window.dispatchEvent(new CustomEvent("webora:drawer:open"));
    });
  </script>
</header>