---
import { loadSiteConfig } from "../lib/siteConfig";
import BaseLayout from "../layouts/BaseLayout.astro";
import SectionRenderer from "../components/SectionRenderer.astro";

const cfg = await loadSiteConfig();

const hero = (cfg.sections || []).find((s) => s.type === "hero");
const branding = (cfg.sections || []).find((s) => s.id === "branding");
---

<BaseLayout cfg={cfg} title={`${cfg.brand.name} â€” Inizio`}>
  <div style="display: flex; flex-direction: column; gap: 0;">
    {hero && <SectionRenderer cfg={cfg} section={hero} />}
    {branding && <SectionRenderer cfg={cfg} section={branding} />}
    
    <div class="tunnel-gateway reveal">
      <p class="gateway-subtitle">Immergiti</p>
      <a href="/prezzi-lavori" class="gateway-link">
        <span class="gateway-title">Prezzi & Lavori</span>
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="gateway-arrow">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>
  </div>
</BaseLayout>

<style>
  .tunnel-gateway {
    padding: 60px 24px 120px;
    text-align: center;
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .gateway-subtitle {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--muted);
    margin-bottom: 16px;
    font-weight: 600;
  }
  .gateway-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    color: var(--text);
    transition: all 0.3s ease;
  }
  .gateway-link:hover {
    color: var(--accent2);
    transform: translateY(4px);
  }
  .gateway-title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 800;
    letter-spacing: -0.02em;
  }
  .gateway-arrow {
    color: var(--accent);
    animation: bounceDown 2s infinite cubic-bezier(0.2, 0.8, 0.2, 1);
  }
  @keyframes bounceDown {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(10px); }
  }
</style>